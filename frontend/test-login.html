<!DOCTYPE html>
<html>
<head>
    <title>Login Test</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>Login Test</h1>
    <button onclick="testLogin()">Test Login</button>
    <div id="result"></div>

    <script>
        axios.defaults.baseURL = 'http://localhost:8000';
        axios.defaults.withCredentials = true;
        axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

        async function testLogin() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                console.log('Starting test login...');
                
                const response = await axios.post('/api/login', {
                    email: 'ivan@admin.local',
                    password: 'password'
                });
                
                console.log('Login successful:', response.data);
                resultDiv.innerHTML = `<pre style="color: green;">SUCCESS: ${JSON.stringify(response.data, null, 2)}</pre>`;
                
            } catch (error) {
                console.error('Login failed:', error);
                resultDiv.innerHTML = `<pre style="color: red;">ERROR: ${error.message}
                
Response: ${error.response ? JSON.stringify(error.response.data, null, 2) : 'No response'}
Status: ${error.response ? error.response.status : 'No status'}</pre>`;
            }
        }
    </script>
</body>
</html>
